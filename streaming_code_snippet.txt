          const respStream: any = await (openai as any).responses.stream({
            model: "gpt-5",
            input: messages as any,
            temperature: 0.7,
            reasoning: { effort: 'medium' },
            text: { verbosity: 'low' },
            stream: true,
          });

          for await (const event of respStream) {
            const type = event?.type;
            if (type === 'response.output_text.delta') {
              const delta = event.delta as string;
              if (delta) send({ type: 'delta', content: delta });
            } else if (type === 'response.completed') {
              break;
            } else if (type === 'response.error') {
              send({ type: 'error', message: event.error?.message || 'Model error' });
            }
          }